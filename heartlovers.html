<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Particle Heart â€” Love</title>
<style>
  html,body { height:100%; margin:0; background:#0b0610; overflow:hidden; }
  canvas { display:block; width:100vw; height:100vh; }
  .center-ui {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    pointer-events: none;
    user-select: none;
    text-align:center;
  }
  .play {
    width:100px; height:100px;
    border-radius:50%;
    background: rgba(255,255,255,0.07);
    display:flex; align-items:center; justify-content:center;
    backdrop-filter: blur(0.5px);
    pointer-events: auto;
    cursor: pointer;
    transition: transform .18s ease, background .2s ease;
  }
  .play:hover { transform: scale(1.06); background: rgba(255,255,255,0.12); }
  .triangle {
    width:0; height:0; border-left:22px solid white; border-top:14px solid transparent; border-bottom:14px solid transparent;
    filter: drop-shadow(0 2px 6px rgba(0,0,0,0.6));
    transform: translateX(4px);
    opacity:0.95;
  }
  .label {
    font-family: "Segoe UI", system-ui, -apple-system, Roboto, "Helvetica Neue", Arial;
    color: #ffd5e0;
    font-size: 28px;
    letter-spacing: 1px;
    margin-top:12px;
    text-shadow: 0 6px 20px rgba(255,40,120,0.06);
  }
  .sub {
    color: rgba(255,255,255,0.65);
    font-size:12px; margin-top:4px;
  }
  @media (max-width:600px) {
    .play { width:76px; height:76px; }
    .triangle { border-left:16px solid white; border-top:10px solid transparent; border-bottom:10px solid transparent; transform: translateX(3px); }
    .label { font-size:20px; }
  }
</style>
</head>
<body>
<canvas id="c"></canvas>

<div class="center-ui" id="ui">
  <div class="play" id="playBtn" title="Play">
    <div class="triangle"></div>
  </div>
  <div class="label">Love</div>
  <div class="sub">click play for celebration</div>
</div>

<script>
/*
 Particle Heart Animation
 Single-file HTML/JS. No libraries.
 Click play button to trigger "celebration" (burst, sparkle).
*/

const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d', { alpha: true });
let W = canvas.width = innerWidth;
let H = canvas.height = innerHeight;
const DPR = Math.max(1, window.devicePixelRatio || 1);
canvas.width = W * DPR;
canvas.height = H * DPR;
canvas.style.width = W + 'px';
canvas.style.height = H + 'px';
ctx.setTransform(DPR, 0, 0, DPR, 0, 0);

// responsive handle
function resize() {
  W = canvas.width = innerWidth;
  H = canvas.height = innerHeight;
  canvas.width = W * DPR;
  canvas.height = H * DPR;
  canvas.style.width = W + 'px';
  canvas.style.height = H + 'px';
  ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
  heart.initTargets();
}
addEventListener('resize', resize);

// heart parametric to generate points
function heartPoint(t, scale = 18) {
  // classic heart parametric (x,y)
  const x = 16 * Math.pow(Math.sin(t), 3);
  const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
  return { x: x * scale, y: -y * scale };
}

const heart = {
  targets: [],
  initTargets() {
    this.targets = [];
    // generate many target points along heart boundary and inside (using jitter)
    const centerX = W / 2;
    const centerY = H / 2 - Math.min(60, H*0.05);
    const scale = Math.min(8 + W/150, 20 + H/80);
    const density = Math.floor(1500 * Math.min(1, (W*H)/(1200*800))); // scale particle count by screen
    for (let i=0;i<density;i++) {
      // choose random t and a jittered radius to fill interior
      const t = Math.random() * Math.PI * 2;
      const base = heartPoint(t, scale);
      // push slightly inward by moving toward center of the heart shape (0,0) in param space
      const r = Math.pow(Math.random(), 0.9) * (0.9 + Math.random()*0.2);
      const tx = centerX + base.x * r;
      const ty = centerY + base.y * r;
      // color gradient across fill
      const hue = 330 + Math.floor((Math.random()*40)-10); // pink to red-ish
      const light = 55 + Math.floor(Math.random()*12);
      const color = `hsl(${hue}deg 80% ${light}%)`;
      this.targets.push({ x: tx, y: ty, color });
    }
  }
};
heart.initTargets();

class Particle {
  constructor(target) {
    // start near center with small random offset
    this.tx = target.x;
    this.ty = target.y;
    this.color = target.color;
    this.reset();
  }
  reset() {
    const cx = W/2, cy = H/2;
    // start position near center with some jitter
    this.x = cx + (Math.random()-0.5) * 60;
    this.y = cy + (Math.random()-0.5) * 60;
    // velocity
    this.vx = (Math.random()-0.5) * 1.2;
    this.vy = (Math.random()-0.5) * 1.2;
    this.size = 1 + Math.random()*2.2;
    this.opacity = 0.9;
    // easing factor toward target
    this.ease = 0.05 + Math.random() * 0.06;
    this.phase = Math.random()*Math.PI*2;
  }
  update(dt) {
    // small oscillation
    this.phase += 0.02 + Math.random()*0.02;
    const ox = Math.cos(this.phase) * 0.6;
    const oy = Math.sin(this.phase) * 0.6;

    // simple spring toward target
    const dx = (this.tx + ox - this.x);
    const dy = (this.ty + oy - this.y);
    this.vx += dx * 0.002;
    this.vy += dy * 0.002;
    // air friction
    this.vx *= 0.97;
    this.vy *= 0.97;
    this.x += this.vx;
    this.y += this.vy;
  }
  draw(ctx) {
    ctx.beginPath();
    // soft round particle using radial gradient
    const r = this.size;
    ctx.fillStyle = this.color;
    ctx.globalAlpha = this.opacity;
    ctx.fillRect(this.x - r/2, this.y - r/2, r, r);
    ctx.globalAlpha = 1;
  }
  explode(force=6) {
    // scatter velocity away from center
    const angle = Math.atan2(this.y - H/2, this.x - W/2) + (Math.random()-0.5)*0.8;
    const mag = force * (0.6 + Math.random()*1.2);
    this.vx = Math.cos(angle) * mag + (Math.random()-0.5)*2;
    this.vy = Math.sin(angle) * mag * 0.6 - (Math.random()*2);
    // fade
    this.opacity = 1;
  }
}

// create particles from heart targets
let particles = [];
function createParticles() {
  particles = heart.targets.map(t => new Particle(t));
}
createParticles();

// breathing / pulse effect for heart scale
let pulse = { t: 0, speed: 0.008, amount: 1.02 };

let last = performance.now();
let running = true;
function frame(now) {
  const dt = now - last;
  last = now;
  if (!running) return;
  pulse.t += dt * pulse.speed;
  // clear with slight trailing for glow
  ctx.fillStyle = 'rgba(10,6,12,0.18)';
  ctx.fillRect(0,0,W,H);

  // optional background subtle vignette
  const g = ctx.createRadialGradient(W/2, H/2, Math.min(W,H)*0.3, W/2, H/2, Math.max(W,H));
  g.addColorStop(0, 'rgba(0,0,0,0)');
  g.addColorStop(1, 'rgba(0,0,0,0.45)');
  ctx.fillStyle = g;
  ctx.fillRect(0,0,W,H);

  // update and draw particles
  for (let p of particles) {
    // small target wobble using pulse
    p.tx += Math.sin(pulse.t + (p.tx%7)) * 0.02;
    p.ty += Math.cos(pulse.t*1.2 + (p.ty%11)) * 0.02;
    p.update(dt);
  }

  // draw soft glow layer: draw bigger blurred points using composite
  ctx.save();
  ctx.globalCompositeOperation = 'lighter';
  for (let i=0;i<particles.length;i+=3) {
    const p = particles[i];
    ctx.globalAlpha = 0.12;
    ctx.beginPath();
    ctx.fillStyle = particles[i].color;
    ctx.arc(p.x, p.y, 8, 0, Math.PI*2);
    ctx.fill();
  }
  ctx.restore();

  // main particle draw (crisper)
  for (let p of particles) {
    p.draw(ctx);
  }

  // optional faint outline heart (for silhouette)
  ctx.save();
  ctx.globalAlpha = 0.08;
  ctx.strokeStyle = 'rgba(255,255,255,0.06)';
  ctx.lineWidth = 2;
  ctx.beginPath();
  // draw parametric path scaled to current size
  const scale = Math.min(8 + W/150, 20 + H/80) * (1 + Math.sin(pulse.t)*0.015);
  const cx = W/2, cy = H/2 - Math.min(60, H*0.05);
  for (let t=0;t<=Math.PI*2; t += 0.06) {
    const pnt = (function(tLocal){
      const x = 16 * Math.pow(Math.sin(tLocal), 3);
      const y = 13 * Math.cos(tLocal) - 5 * Math.cos(2*tLocal) - 2 * Math.cos(3*tLocal) - Math.cos(4*tLocal);
      return { x: cx + x*scale, y: cy - y*scale };
    })(t);
    if (t===0) ctx.moveTo(pnt.x, pnt.y); else ctx.lineTo(pnt.x, pnt.y);
  }
  ctx.closePath();
  ctx.stroke();
  ctx.restore();

  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);

// play button interaction and celebration
const playBtn = document.getElementById('playBtn');
playBtn.addEventListener('click', trigger);

let celebrating = false;
function trigger() {
  if (celebrating) {
    // if already celebrated, do a reset (rebuild particles)
    heart.initTargets();
    createParticles();
    celebrating = false;
    return;
  }
  celebrating = true;
  // explode particles outward then fade into small sparks
  for (let p of particles) {
    p.explode(9 + Math.random()*6);
  }
  // create small confetti spawns
  spawnConfetti(80);
  // small "bounce" animation on button
  playBtn.style.transform = 'scale(0.92)';
  setTimeout(()=> playBtn.style.transform = '', 220);

  // also for a few seconds let confetti and sparks run, then rebuild where they return to heart
  setTimeout(() => {
    // rebuild targets with slight new positions so it looks lively
    heart.initTargets();
    for (let i=0;i<particles.length;i++){
      particles[i].tx = heart.targets[i % heart.targets.length].x;
      particles[i].ty = heart.targets[i % heart.targets.length].y;
      // gently ease back
      particles[i].vx *= 0.18; particles[i].vy *= 0.18;
    }
    celebrating = false;
  }, 2200);
}

// simple confetti sparks
const confetti = [];
function spawnConfetti(n) {
  for (let i=0;i<n;i++) {
    const c = {
      x: W/2 + (Math.random()-0.5)*80,
      y: H/2 + (Math.random()-0.5)*80,
      vx: (Math.random()-0.5)*12,
      vy: -6 - Math.random()*8,
      life: 120 + Math.random()*60,
      size: 2 + Math.random()*4,
      color: `hsl(${320 + Math.random()*40} 80% ${50 + Math.random()*20}%)`,
    };
    confetti.push(c);
  }
  // animate confetti separately
  const interval = setInterval(() => {
    // update
    for (let i=confetti.length-1;i>=0;i--) {
      const p = confetti[i];
      p.vy += 0.3; p.vx *= 0.995;
      p.x += p.vx; p.y += p.vy;
      p.life--;
      if (p.life <= 0 || p.y > H+50) confetti.splice(i,1);
    }
    // draw confetti overlay each frame (we'll hook into global draw by temporarily drawing here)
    // We'll draw semi-glow dots now
    for (let p of confetti) {
      ctx.save();
      ctx.globalCompositeOperation = 'lighter';
      ctx.globalAlpha = Math.max(0, Math.min(1, p.life/140));
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x, p.y, p.size, p.size*1.8);
      ctx.restore();
    }
    if (confetti.length === 0) clearInterval(interval);
  }, 16);
}

// allow clicking anywhere to toggle play too
canvas.addEventListener('click', (e)=> {
  // check if click was inside play button zone (but allow anywhere)
  trigger();
});

// initialize quickly when user loads
(function initialPulse() {
  // gentle pulse and small entrance animation
  for (let p of particles) {
    // push them slightly off and let them settle
    p.x += (Math.random()-0.5)*220;
    p.y += (Math.random()-0.5)*220;
    p.vx *= 0.2; p.vy *= 0.2;
  }
})();

</script>
</body>
</html>
